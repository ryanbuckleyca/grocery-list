<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>311 Grocery List</title>
    <link type="text/css" rel="stylesheet" href="style.css" />
  </head>
  <body>
    <script type="text/javascript">

      let data = null;
      let xmlhttp = new XMLHttpRequest();
      xmlhttp.open("GET", "/foodItems", false);
      xmlhttp.send();
      if (xmlhttp.status==200) { data = xmlhttp.responseText; }
      
      let print = JSON.parse(data);      

      let node = document.createElement("div");
      node.id = "groceryTable";
      document.getElementsByTagName("body")[0].appendChild(node);

      //print each line of the list
      for(let i = 0; i < print.length; i++) { 
        itemData = print[i];

        node = document.createElement("div");
        node.id = "row" + i;
        node.className = "groceryRow";
        document.getElementById("groceryTable").appendChild(node);

        //add Item name and render based on Status
        node = document.createElement("div");
        node.id = "item" + i + "name";
        switch(itemData.status){
          case "GOOD": node.className = "groceryItem good"; break;
          case "LOW": node.className = "groceryItem low"; break;
          case "OUT": node.className = "groceryItem out"; break;
          default: node.className = "groceryItem"; break;
        }
        node.innerHTML = "<p>"+itemData.name+"</p>";
        document.getElementById("row" + i).appendChild(node);

        //add Item category
        node = document.createElement("div");
        node.id = "item" + i + "category";
        node.className = "groceryCategory";
        node.innerHTML = "<p>"+itemData.category+"</p>";
        document.getElementById("row" + i).appendChild(node);
      }  
      </script>  
  </body>
</html>
